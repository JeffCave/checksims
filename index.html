<!DOCTYPE html>
<html>
<head>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js"></script>
 <script type="text/javascript" src="./scripts/allLibs.js"></script>
 <script type="text/javascript" src="./scripts/ChecksimsCommandLine.js"></script>
 <script>
	/* global ChecksimsCommandLine, */
	'use strict';

	window.addEventListener('load',function(){
		let checker = new ChecksimsCommandLine();
		let button = document.querySelector('button');
		let upload = document.querySelector("input[name='zip']");

		button.addEventListener('click',function(e){
			checker.runHtml({});
		});

		upload.addEventListener('change',function(e){
			e.dataTransfer.files.forEach(function(file){
				if (!file.type.startsWith('image/')){
					return;
				}

				let reader = new FileReader();
				reader.addEventListener('load', function(zip) {
						if(zip.slice(0,2) === 'PK'){
							checker.loadFile(zip);
						}
					});
				reader.readAsDataURL(file);
			});
		});
	});
 </script>
</head>
<body>
 <fieldset>
  <input name='zip' type="file" multiple />
  <button name='run' disabled>Run</button>
 </fieldset>
</body>
</html>
